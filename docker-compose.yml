services:
  pocketbase:
    build:
      context: ./pocketbase
      args:
        ADMIN_EMAIL: ${OATS_ADMIN_EMAIL}
        ADMIN_PASSWORD: ${OATS_ADMIN_PASSWORD}
    ports:
      - "5000:5000"
    volumes:
      - ./pocketbase/main.go:/app/main.go
      - ./pocketbase/.air.toml:/app/.air.toml
    networks:
      - pocketbase
    image: ambareesh1510/aim-trainer-backend-pocketbase

  nginx:
    image: nginx:latest
    restart: always
    volumes:
      - ./nginx/conf/:/etc/nginx/
      - ./nginx/html/:/usr/share/nginx/html/
      - /etc/letsencrypt/:/etc/letsencrypt/:ro
    ports:
      - "80:80"
      - "443:443"
    depends_on:
      - pocketbase
    networks:
      - pocketbase

networks:
  pocketbase:

